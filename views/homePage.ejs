<html>
<body>
<link rel="stylesheet" href="/stylesheets/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="navbar">
    <a class="active" href="homePage">Home</a>
    <% if(!isLoggedIn) { %>
        <a id="login" href="login">Log In</a>
    <% } %>
    <% if(isLoggedIn){ %>
        <a id="logout" href="logout">Log Out</a>
    <% } %>
    <% if(!isLoggedIn){ %>
        <a id="signup" href="registration">Sign Up</a>
    <% } %>
    <% if(isLoggedIn){ %>
        <a id="postimg" href="postImage">Post Image</a>
    <% } %>
</div>

<form class="search" method="POST" style="margin:auto;max-width:300px; padding-left: 4px;" autocomplete="off" onsubmit="return validateSearch()">
    <input type="text" placeholder="Search..." name="searchbar"id="searchtext" >
    <button type="submit"><i class="fa fa-search"></i></button>
</form>

<div class="grid flexbox">
    <% if(typeof data == 'object' && data && data.length) {
    for(var i = data.length - 1; i >= 0; i--) { %>
        <% var detail = "/imageDetails" + data[i].id %>
        <div class="grid-item"><a class="homeImg" href="<%= detail %>">
                <img
                class="lazy"
                <%if(data[i].photowidth >= 450){%>
                    <%var wide = 450 / data[i].photowidth%>
                    height="<%= data[i].photoheight * (wide)%>"
                    width="<%= 450%>"
                <%}else{%>
                    <%var high = data[i].photowidth / 450%>
                    height="<%= data[i].photoheight / (high)%>"
                    width="<%= 450%>"
                <%}%>
                data-src="<%= process.env.AWS_BUCKET_GETBUCKET_PUBLIC_NAME + "/" + data[i].photopath %>"
                style="" alt="">
        </a></div>
    <% }} %>
</div>

<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script>
    var elem = document.querySelector('.grid');
    var msnry = new Masonry( elem, {
        itemSelector: '.grid-item',
        columnWidth: 450,
        fitWidth: true,
        horizontalOrder: true,
        gutter: 4
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@15.1.1/dist/lazyload.min.js"></script>
<script>
    const myLazyLoad = new LazyLoad({
        elements_selector: ".lazy"
    });
</script>

<script type="text/javascript" src="../javascripts/formValidation.js"></script>
</body>
</html>